(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{76439:function(e,s,t){Promise.resolve().then(t.bind(t,5637))},5637:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(57437),l=t(16463),r=t(2265),n=t(54663),i=t(80683),d=t(66461),o=t(79776),c=t(43518),x=t(56828),u=t(74232),m=t(22023);function h(e){let{companies:s,publications:t,patents:l}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-primary"}),(0,a.jsx)(x.ll,{className:"text-base",children:"Related Companies"})]}),(0,a.jsx)(x.SZ,{className:"text-xs",children:"Key players in the ecosystem"})]}),(0,a.jsxs)(x.aY,{className:"space-y-2 pr-1",children:[0===s.length&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"No companies available"}),s.map((e,s)=>(0,a.jsxs)("div",{className:"p-2 rounded-md border border-border/30 bg-secondary/30",children:[e.link?(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-primary hover:underline",children:e.name}):(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]},s))]})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-accent"}),(0,a.jsx)(x.ll,{className:"text-base",children:"Publications"})]}),(0,a.jsx)(x.SZ,{className:"text-xs",children:"Research & analysis sources"})]}),(0,a.jsxs)(x.aY,{className:"max-h-[260px] overflow-y-auto space-y-2 pr-1",children:[0===t.length&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"No publications available"}),t.map((e,s)=>{let t=function(e){let s=/https?:\/\/[^\s]+/g,t=e.match(s);return{link:t?t[0]:null,cleanTitle:e.replace(s,"").replace(/:\s*$/,"").trim()}}(e.title),l=e.link||t.link,r=t.cleanTitle||e.title;return(0,a.jsx)("div",{className:"p-2 rounded-md border border-border/30 bg-secondary/30",children:l?(0,a.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-primary hover:underline",children:r}):(0,a.jsx)("p",{className:"text-sm",children:r})},s)})]})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-purple-500"}),(0,a.jsx)(x.ll,{className:"text-base",children:"Patents"})]}),(0,a.jsx)(x.SZ,{className:"text-xs",children:"Key filed patents (ML-derived)"})]}),(0,a.jsxs)(x.aY,{className:"max-h-[260px] overflow-y-auto space-y-2 pr-1",children:[0===l.length&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"No patents available"}),l.map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"p-2 rounded-md border border-border/30 bg-secondary/30",children:[e.link?(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-primary hover:underline",children:e.title}):(0,a.jsx)("p",{className:"text-sm font-medium",children:e.title}),e.year&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Year: ",e.year," \xb7 TRL: ",null!==(t=e.trl)&&void 0!==t?t:"N/A"]})]},s)})]})]})]})}function p(e){var s,t,l,x,u,m,p,v,f,j,b,N,g;let{tech:y}=e,[w,k]=(0,r.useState)(null),[S,_]=(0,r.useState)(null),[T,C]=(0,r.useState)(null),[Z]=(0,r.useState)(c.$v);(0,r.useEffect)(()=>{let e=!1;return async function(){if(y&&"undefined"!==y)try{let l=await fetch("".concat(n.z,"/api/technology/").concat(y));if(!l.ok)throw Error("Technology data not available");let r=await l.text();if(r.startsWith("<"))throw Error("Invalid response");let i=JSON.parse(r);if(!e){var s,t,a;k(null!==(t=null!==(s=i.dashboard)&&void 0!==s?s:i.data)&&void 0!==t?t:i),_(null!==(a=i.knowledge_graph)&&void 0!==a?a:null),requestAnimationFrame(()=>{window.scrollTo({top:scrollY})})}}catch(e){console.error("❌ Load failed:",e)}}(),()=>{e=!0}},[y]);let O=(0,r.useMemo)(()=>S?(0,o.o)(S,Z):null,[S,Z]);return T?(0,a.jsx)("p",{className:"text-sm text-red-500",children:T}):w?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold capitalize",children:y}),(0,a.jsx)(i.w,{trendCurve:null!==(p=w.trend_curve)&&void 0!==p?p:[],countryInvestment:null!==(v=null===(s=w.country_investment)||void 0===s?void 0:s.values)&&void 0!==v?v:[],patentTimeline:null!==(f=w.patent_timeline)&&void 0!==f?f:[],marketReports:null!==(j=null===(t=w.entities)||void 0===t?void 0:t.market_reports)&&void 0!==j?j:[]}),O&&(null===(l=O.nodes)||void 0===l?void 0:l.length)>0&&(0,a.jsxs)("div",{className:"rounded-xl border bg-card p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Knowledge Graph"}),(0,a.jsx)("div",{className:"h-[420px] w-full overflow-hidden rounded-md border",children:(0,a.jsx)(d.c,{nodes:O.nodes,edges:O.edges})})]}),(0,a.jsx)(h,{companies:null!==(b=null===(x=w.entities)||void 0===x?void 0:x.companies)&&void 0!==b?b:[],publications:null!==(N=null===(u=w.entities)||void 0===u?void 0:u.papers)&&void 0!==N?N:[],patents:null!==(g=null===(m=w.entities)||void 0===m?void 0:m.patents)&&void 0!==g?g:[]})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading analysis…"})}var v=t(13794),f=t(74661);function j(){var e;let s=(null===(e=(0,l.useSearchParams)().get("base"))||void 0===e?void 0:e.toLowerCase())||"ai",[t,i]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[c,x]=(0,r.useState)(!1);async function u(e){try{let s=await fetch("".concat(n.z,"/api/validate-tech"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}),t=await s.json();if("reject"===t.decision){alert("This does not appear to be a valid technology.");return}if("needs_confirmation"===t.decision){o(t.suggestion),x(!0);return}i(t.technology)}catch(e){alert("Validation failed. Please try again.")}}return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-4 flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 shrink-0",children:[(0,a.jsx)(f.x,{}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:"TechIntel"})]}),(0,a.jsxs)("div",{className:"flex-1 flex justify-center relative",children:[(0,a.jsx)("input",{placeholder:"Search technology to compare…",className:"border px-4 py-2 rounded-md w-full max-w-lg bg-background",onKeyDown:e=>{if("Enter"===e.key){let s=e.currentTarget.value.toLowerCase().trim();s&&(u(s),e.currentTarget.value="")}}}),c&&d&&(0,a.jsxs)("div",{className:"absolute top-14 bg-background border border-border p-4 rounded shadow z-50 w-[320px]",children:[(0,a.jsxs)("p",{className:"mb-3 text-sm",children:["Did you mean ",(0,a.jsx)("b",{children:d}),"?"]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{className:"px-3 py-1 bg-primary text-primary-foreground rounded",onClick:()=>{x(!1),i(d)},children:"Yes"}),(0,a.jsx)("button",{className:"px-3 py-1 border rounded",onClick:()=>x(!1),children:"No"})]})]})]}),(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)(v.T,{})})]})}),(0,a.jsxs)("div",{className:"mx-auto max-w-7xl grid grid-cols-2 gap-6 p-6",children:[(0,a.jsx)(p,{tech:s}),t&&(0,a.jsx)(p,{tech:t})]})]})}},74661:function(e,s,t){"use strict";t.d(s,{x:function(){return r}});var a=t(57437),l=t(16463);function r(){let e=(0,l.useRouter)();return"/"===(0,l.usePathname)()?null:(0,a.jsx)("button",{onClick:()=>{window.history.length>1?e.back():e.push("/")},className:"text-sm text-muted-foreground hover:text-foreground transition",children:"← Back"})}}},function(e){e.O(0,[569,761,391,827,971,23,744],function(){return e(e.s=76439)}),_N_E=e.O()}]);