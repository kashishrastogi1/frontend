(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{25368:function(e,t,r){Promise.resolve().then(r.bind(r,85053))},85053:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var n=r(57437),a=r(2265),o=r(16463),l=r(35231),s=r(25974),i=r(2842),c=r(9542),u=r(85475),d=r(20153),h=r(45745);let f=["#2563eb","#16a34a","#dc2626","#7c3aed","#ea580c","#0891b2","#db2777","#65a30d","#0f766e","#9333ea","#b45309","#4f46e5","#0284c7","#15803d","#be123c","#a21caf","#1d4ed8","#f97316","#06b6d4","#84cc16"];function m(e){let{data:t}=e;if(!t.length)return null;let r=Object.keys(t[0]).filter(e=>"country"!==e);return(0,n.jsx)("div",{className:"h-[420px] w-full rounded-xl border p-4",children:(0,n.jsx)(l.h,{width:"100%",height:"100%",children:(0,n.jsxs)(s.v,{data:t,children:[(0,n.jsx)(i.K,{dataKey:"country"}),(0,n.jsx)(c.B,{}),(0,n.jsx)(u.u,{}),(0,n.jsx)(d.D,{}),r.map((e,t)=>(0,n.jsx)(h.$,{dataKey:e,fill:f[t%f.length]},e))]})})})}var p=r(92566),v=r(54142),x=r(16638);let g=["#2563eb","#16a34a","#dc2626","#7c3aed","#ea580c"];function b(e){let{data:t,title:r,yLabel:a}=e;if(!t.length)return null;let o=Object.keys(t[0]).filter(e=>"year"!==e);return(0,n.jsxs)("div",{className:"rounded-xl border p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:r}),(0,n.jsx)(l.h,{width:"100%",height:420,children:(0,n.jsxs)(p.w,{data:t,children:[(0,n.jsx)(v.q,{strokeDasharray:"3 3"}),(0,n.jsx)(i.K,{dataKey:"year"}),(0,n.jsx)(c.B,{label:{value:a,angle:-90,position:"insideLeft"}}),(0,n.jsx)(u.u,{}),(0,n.jsx)(d.D,{}),o.map((e,t)=>(0,n.jsx)(x.x,{type:"monotone",dataKey:e,stroke:g[t%g.length],strokeWidth:2.5,dot:!1,activeDot:{r:5}},e))]})})]})}var y=r(78116),j=r(85811);let w=["#2563eb","#16a34a","#dc2626","#9333ea","#ea580c","#0d9488","#4f46e5","#be123c"];function N(e){let{data:t}=e;return t.length?(0,n.jsx)("div",{className:"h-[420px] w-full rounded-xl border p-4",children:(0,n.jsx)(l.h,{width:"100%",height:400,children:(0,n.jsxs)(y.G,{children:[(0,n.jsx)(v.q,{strokeDasharray:"3 3"}),(0,n.jsx)(i.K,{type:"number",dataKey:"x",hide:!0}),(0,n.jsx)(c.B,{type:"number",dataKey:"value",label:{value:"Market Size (USD B)",angle:-90,position:"insideLeft"}}),(0,n.jsx)(u.u,{content:e=>{let{payload:t}=e;if(!(null==t?void 0:t.length))return null;let r=t[0].payload;return(0,n.jsxs)("div",{className:"rounded-md border bg-white p-2 shadow",children:[(0,n.jsx)("div",{className:"font-medium",children:r.title}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Market Size: ",r.value," B USD"]})]})}}),t.map((e,t)=>{let r=w[t%w.length];return(0,n.jsx)(j.b,{name:e.tech,data:e.points.map((t,r)=>({x:r-e.points.length/2,value:t.value,title:t.title,source:t.source})),fill:r,r:6},e.tech)}),(0,n.jsx)(d.D,{})]})})}):null}var k=r(83907),E=r(14322);let T={},S=["#2563eb","#16a34a","#dc2626","#7c3aed","#ea580c","#0891b2","#ca8a04","#be185d"];function C(e){return T[e]||(T[e]=S[function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r);return Math.abs(t)}(e)%S.length]),T[e]}function A(e){let{nodes:t,edges:r}=e,o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!o.current)return;let e=new E.qg(t.map(e=>{var t;return{id:e.id,label:"",shape:function(e){switch(e){case"technology":return"diamond";case"patent":return"box";case"paper":return"ellipse";case"company":return"triangle";case"country":return"hexagon";default:return"dot"}}(e.type),color:{background:1===(t=e.techs).length?C(t[0]):"#f59e0b",border:"#111827"},url:e.url,title:"".concat(e.label,"\nType: ").concat(e.type,"\nTechnologies: ").concat(e.techs.join(", "),"\nShared by: ").concat(e.techCount," tech")}})),n=new E.qg(r.map((e,t)=>({id:"".concat(e.source,"-").concat(e.target,"-").concat(t),from:e.source,to:e.target,arrows:"to",color:"#9ca3af",title:e.relation,smooth:!0}))),a=new k.Zc(o.current,{nodes:e,edges:n},{interaction:{hover:!0},nodes:{borderWidth:1},physics:{stabilization:!0,barnesHut:{gravitationalConstant:-4e3,springLength:140}}});return a.on("selectNode",e=>{let r=e.nodes[0],n=t.find(e=>e.id===r);console.log("Clicked node:",n),(null==n?void 0:n.url)?window.open(n.url,"_blank","noopener,noreferrer"):console.warn(" No URL found for this node:",r)}),()=>a.destroy()},[t,r]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3 text-sm mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,n.jsx)("span",{className:"font-medium text-muted-foreground",children:"Technologies"}),(0,n.jsx)("div",{className:"flex items-center gap-3 flex-wrap",children:Array.from(new Set(t.flatMap(e=>e.techs))).map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"w-2.5 h-2.5 rounded-full",style:{background:C(e)}}),(0,n.jsx)("span",{className:"text-muted-foreground",children:e})]},e))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,n.jsx)("span",{className:"font-medium text-muted-foreground",children:"Entities"}),(0,n.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"w-3 h-3 rotate-45 border border-muted-foreground"}),(0,n.jsx)("span",{children:"Technology"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"w-3 h-3 border border-muted-foreground"}),(0,n.jsx)("span",{children:"Patent"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-muted-foreground"}),(0,n.jsx)("span",{children:"Paper"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-b-[10px] border-l-transparent border-r-transparent border-b-muted-foreground"}),(0,n.jsx)("span",{children:"Company"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"w-3 h-3 rotate-45 bg-muted-foreground"}),(0,n.jsx)("span",{children:"Country"})]})]})]})]}),(0,n.jsx)("div",{ref:o,className:"w-full h-[600px] border rounded-md"})]})}var L=r(13794),O=r(74661),_=r(54663);function P(){var e;let t=(null===(e=(0,o.useSearchParams)().get("base"))||void 0===e?void 0:e.toLowerCase())||"ai",[r,l]=(0,a.useState)([t]),[s,i]=(0,a.useState)({}),[c,u]=(0,a.useState)("trend"),[d,h]=(0,a.useState)(""),[f,p]=(0,a.useState)(null),[v,x]=(0,a.useState)(!1);async function g(e){let t=await fetch("".concat(_.z,"/api/validate-tech"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}),n=await t.json();if("reject"===n.decision){alert("This does not appear to be a technology.");return}if("needs_confirmation"===n.decision){p(n.suggestion),x(!0);return}r.includes(n.technology)||l(e=>[...e,n.technology])}(0,a.useEffect)(()=>{r.forEach(async e=>{if(s[e])return;let t=await fetch("".concat(_.z,"/api/tech/").concat(e));if(404===t.status&&(await fetch("".concat(_.z,"/api/tech/").concat(e),{method:"POST"}),t=await fetch("".concat(_.z,"/api/tech/").concat(e))),!t.ok)return;let r=await t.json();i(t=>({...t,[e]:r}))})},[r]);let y=(0,a.useMemo)(()=>r.length<2?null:"trend"===c?function(e,t){let r=new Set,n={};return Object.entries(e).forEach(e=>{var a;let[o,l]=e,s=t.includes(".")?t.split(".").reduce((e,t)=>null==e?void 0:e[t],null==l?void 0:l.dashboard):null==l?void 0:null===(a=l.dashboard)||void 0===a?void 0:a[t];Array.isArray(s)&&(n[o]={},s.forEach((e,t)=>{if("object"==typeof e&&"number"==typeof e.year){var a,l;r.add(e.year),n[o][e.year]=null!==(l=null!==(a=e.value)&&void 0!==a?a:e.count)&&void 0!==l?l:0}if("number"==typeof e){let a=2020+t;r.add(a),n[o][a]=e}}))}),Array.from(r).sort().map(e=>{let t={year:e};return Object.keys(n).forEach(r=>{var a;t[r]=null!==(a=n[r][e])&&void 0!==a?a:null}),t})}(s,"trend_curve"):"patents"===c?function(e){let t=new Set,r={};return Object.entries(e).forEach(e=>{var n,a;let[o,l]=e;r[o]={},(null!==(a=null==l?void 0:null===(n=l.dashboard)||void 0===n?void 0:n.patent_timeline)&&void 0!==a?a:[]).forEach(e=>{if("number"==typeof e.year){var n,a;t.add(e.year),r[o][e.year]=(null!==(n=r[o][e.year])&&void 0!==n?n:0)+(null!==(a=e.count)&&void 0!==a?a:1)}})}),Array.from(t).sort().map(e=>{let t={year:e};return Object.keys(r).forEach(n=>{var a;t[n]=null!==(a=r[n][e])&&void 0!==a?a:0}),t})}(s):"investment"===c?function(e){let t={},r=Object.keys(e);return Object.entries(e).forEach(e=>{var r,n,a,o;let[l,s]=e;Object.entries((null==s?void 0:null===(n=s.dashboard)||void 0===n?void 0:null===(r=n.country_investment)||void 0===r?void 0:r.values)||(null==s?void 0:null===(o=s.dashboard)||void 0===o?void 0:null===(a=o.investment_index)||void 0===a?void 0:a.values)||{}).forEach(e=>{let[r,n]=e,a=r.toLowerCase().includes("united")||"usa"===r.toLowerCase()?"USA":r;t[a]||(t[a]={country:a}),t[a][l]=Number(n)||0})}),Object.values(t).forEach(e=>{r.forEach(t=>{void 0===e[t]&&(e[t]=0)})}),Object.values(t)}(s):"market"===c?Object.entries(s).map(e=>{var t,r,n,a,o;let[l,s]=e;return{tech:l,points:(null!==(o=null!==(a=null==s?void 0:null===(t=s.dashboard)||void 0===t?void 0:t.market_reports)&&void 0!==a?a:null==s?void 0:null===(n=s.dashboard)||void 0===n?void 0:null===(r=n.entities)||void 0===r?void 0:r.market_reports)&&void 0!==o?o:[]).map(e=>{var t;let r=function(e){if(!e)return null;let t=e.toLowerCase().replace(/[$,]/g,"").trim(),r=parseFloat(t);return isNaN(r)?null:t.includes("trillion")?1e3*r:t.includes("billion")?r:t.includes("million")?r/1e3:null}(e.market_size);return null===r?null:{value:r,title:e.title,source:null!==(t=e.source)&&void 0!==t?t:"Market Report"}}).filter(Boolean)}}):void 0,[s,c,r.length]),j=(0,a.useMemo)(()=>{let e=Object.entries(s).map(e=>{let[t,r]=e;return(null==r?void 0:r.knowledge_graph)?{tech:t,kg:r.knowledge_graph}:null}).filter(Boolean);return e.length?function(e){let t=new Map,r=[];return e.forEach(e=>{let{tech:n,kg:a}=e;a.nodes.forEach(e=>{let r=t.get(e.id);if(r){var a;r.techs.includes(n)||(r.techs.push(n),r.techCount=r.techs.length),!r.url&&(null===(a=e.url)||void 0===a?void 0:a.startsWith("http"))&&(r.url=e.url)}else t.set(e.id,{id:e.id,label:e.id,type:e.type,url:e.url&&e.url.startsWith("http")?e.url:void 0,techs:[n],techCount:1,level:"technology"===e.type?0:1})}),a.edges.forEach((e,t)=>{r.push({id:"".concat(n,"-").concat(t,"-").concat(e.source,"-").concat(e.target),source:e.source,target:e.target,relation:e.relation,tech:n})})}),{nodes:[...t.values()],edges:r}}(e):null},[s]),w="market"===c&&Array.isArray(y)&&y.some(e=>{var t;return null===(t=e.points)||void 0===t?void 0:t.length});return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("header",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur",children:(0,n.jsxs)("div",{className:"mx-auto max-w-7xl px-6 py-4 flex items-center gap-6",children:[(0,n.jsx)(O.x,{}),(0,n.jsx)("h1",{className:"text-xl font-bold",children:"Multi-Tech Comparison"}),(0,n.jsx)(L.T,{})]})}),(0,n.jsxs)("main",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,n.jsx)("input",{value:d,placeholder:"Add technology (press Enter)",className:"border px-4 py-2 rounded-md w-full max-w-md",onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d.trim()&&(g(d.trim()),h(""))}}),"kg"===c?j?(0,n.jsx)(A,{nodes:j.nodes,edges:j.edges}):(0,n.jsx)("p",{className:"text-muted-foreground",children:"No KG data available."}):y&&0!==y.length&&("market"!==c||w)?"investment"===c?(0,n.jsx)(m,{data:y}):"market"===c?(0,n.jsx)(N,{data:y}):(0,n.jsx)(b,{data:y,title:"trend"===c?"Adoption Trend":"Patent Activity",yLabel:"trend"===c?"Adoption Index":"Patent Count"}):(0,n.jsx)("p",{className:"text-muted-foreground",children:"No data available for selected technologies."})]})]})}},74661:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var n=r(57437),a=r(16463);function o(){let e=(0,a.useRouter)();return"/"===(0,a.usePathname)()?null:(0,n.jsx)("button",{onClick:()=>{window.history.length>1?e.back():e.push("/")},className:"text-sm text-muted-foreground hover:text-foreground transition",children:"â† Back"})}},13794:function(e,t,r){"use strict";r.d(t,{T:function(){return s}});var n=r(57437),a=r(38296),o=r(92699),l=r(2265);function s(){let[e,t]=(0,l.useState)(null),[r,s]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s(!0);let e=localStorage.getItem("theme"),r=window.matchMedia("(prefers-color-scheme: dark)").matches,n=e||(r?"dark":"light");t(n),i(n)},[]);let i=e=>{let t=document.documentElement;"dark"===e?t.classList.add("dark"):t.classList.remove("dark"),localStorage.setItem("theme",e)};return r?(0,n.jsx)("button",{onClick:()=>{let r="dark"===e?"light":"dark";t(r),i(r)},className:"p-2 rounded-lg bg-secondary hover:bg-secondary/80 transition-colors border border-border","aria-label":"Toggle theme",children:"dark"===e?(0,n.jsx)(a.Z,{className:"w-5 h-5 text-foreground"}):(0,n.jsx)(o.Z,{className:"w-5 h-5 text-foreground"})}):null}},54663:function(e,t,r){"use strict";var n;r.d(t,{z:function(){return a}});let a=null!==(n=r(20357).env.NEXT_PUBLIC_BACKEND_URL)&&void 0!==n?n:"http://localhost:3001"},78030:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2265);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...h}=e;return(0,n.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:r,strokeWidth:i?24*Number(s)/Number(a):s,className:o("lucide",c),...h},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let r=(0,n.forwardRef)((r,l)=>{let{className:i,...c}=r;return(0,n.createElement)(s,{ref:l,iconNode:t,className:o("lucide-".concat(a(e)),i),...c})});return r.displayName="".concat(e),r}},16463:function(e,t,r){"use strict";var n=r(71169);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},20357:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(88081)},88081:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var i=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?i=n.concat(i):u=-1,i.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=i.length;t;){for(n=i,i=[];++u<t;)n&&n[u].run();u=-1,t=i.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new f(e,t)),1!==i.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}},l=!0;try{t[e](o,o.exports,n),l=!1}finally{l&&delete r[e]}return o.exports}n.ab="//";var a=n(229);e.exports=a}()},44839:function(e,t,r){"use strict";function n(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n)}return a}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{W:function(){return n}}),t.Z=n}},function(e){e.O(0,[662,667,761,971,23,744],function(){return e(e.s=25368)}),_N_E=e.O()}]);